{% extends 'base.html' %}

{% block title %}Информация о рабочем времени{% endblock %}

{% block content %}
    <h1>Информация о рабочем времени</h1>
    <h3>{{ user.fio }}</h3>
    <form method="get" class="form-inline mb-4">
        <div class="form-group">
            <label for="id_date_from">Дата с:</label>
            {{ form.date_from }}
        </div>
        <div class="form-group">
            <label for="id_date_to">Дата по:</label>
            {{ form.date_to }}
        </div>
        <div class="form-group">
            <label for="id_finding">Нахождение:</label>
            {{ form.finding }}
        </div>
        <div class="form-group">
            <label for="id_address">Адрес камеры:</label>
            {{ form.address }}
        </div>
        <button type="submit" class="btn btn-primary">Фильтровать</button>
        <a href="{% url 'time_info' user.slug %}" class="btn btn-secondary ml-2">Сбросить фильтры</a>
    </form>
    <div class="user-info">
        {% if status_locations %}
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Нахождение</th>
                    <th>Дата и время</th>
                    <th>Камера</th>
                </tr>
                </thead>
                <tbody>
                {% for status in status_locations %}
                    <tr>
                        <td>{{ status.camera.get_finding_display }}</td>
                        <td>{{ status.created|date:"d.m.Y H:i" }}</td>
                        <td>{{ status.camera.address.name }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <p><strong>Всего отработано времени:</strong> {{ total_worked_time }}</p>
        {% else %}
            <p>Нет данных о нахождении пользователя.</p>
        {% endif %}
        <a href="{% url 'user_info' user.slug %}" class="btn btn-primary btn-sm">Назад</a>
    </div>
{% endblock %}
